# 基本設計書

## 1. システム全体像

### 1.1 概要
図書館貸出管理システムは以下を目的とします。
- 利用者が図書を簡単に検索・貸出できる仕組みを提供。
- 管理者が図書や利用者の情報を効率的に管理。
- 貸出や返却の履歴をデータベースで追跡可能に。

### 1.2 構成図

#### 1.2.1 機能構成図

```
図書館貸出管理システム
├── 利用者管理機能
│     ├── 利用者登録
│     ├── 利用者情報編集
│     └── 利用者情報削除
├── 図書管理機能
│     ├── 図書登録
│     ├── 図書検索
│     ├── 図書情報編集
│     └── 在庫確認
├── 貸出管理機能
│     ├── 貸出手続き
│     ├── 返却手続き
│     ├── 貸出状況確認
│     └── 延滞管理
└── システム設定
      ├── 権限管理
      ├── 利用者アカウント設定
      └── ログ管理
```

### 1.3 使用技術
- **フロントエンド**: React.js（利用者や管理者が操作する画面を構築）
- **バックエンド**: Java（業務ロジックやAPIの提供）
- **データベース**: MySQL（データの永続化）
- **ホスティング**: AWSまたはオンプレミス（利用規模に応じて選択）

## 2. 機能設計

- [x] 業務フロー図挿入（業務フロー＿図書館アプリ.drawio）

### 2.1 利用者管理機能
- **概要**: 利用者の登録や情報編集、削除を行う。
- **入力項目**: 氏名、連絡先、会員番号
- **出力**: 利用者リスト、各利用者の詳細情報
- **主な操作フロー**:
    - 管理者が利用者情報を登録。
    - 利用者情報の修正や削除が可能。

### 2.2 図書管理機能
- **概要**: 図書を登録・検索し、在庫を管理する。
- **入力項目**: 図書ID、タイトル、著者、ジャンル、在庫数
- **出力**: 図書リスト、在庫状況、図書の詳細情報
- **主な操作フロー**:
    - 管理者が図書を登録。
    - 図書検索で指定条件に一致する図書を表示。
    - 在庫状況を確認し、必要に応じて修正。

### 2.3 貸出管理機能
- **概要**: 貸出・返却を管理し、延滞を追跡する。
- **入力項目**: 貸出図書ID、利用者ID、貸出日
- **出力**: 貸出履歴、返却期限、延滞情報
- **主な操作フロー**:
    - 利用者が図書を借りる際、貸出履歴に登録。
    - 返却時に履歴を更新し、在庫数を調整。
    - 延滞日数に応じて警告またはペナルティを表示。

## 3. データ設計

### 3.1 ER図（概念設計）
システム内のデータとその関係を設計します。

- [x] ER図作成済み

```
[利用者] ------------------------< [貸出履歴] >----------------------- [図書]
ユーザーID(PK)                      貸出ID(PK)                      図書ID(PK)
氏名                                図書ID                         タイトル
連絡先                              ユーザーID                     著者
                                    貸出日                         ジャンル
                                    返却期限                       在庫数
```

### 3.2 テーブル設計（物理設計）

#### 利用者テーブル

| カラム名   | データ型     | 制約           | 説明                 |
|------------|--------------|----------------|----------------------|
| ユーザーID | INT          | PRIMARY KEY    | 利用者の一意のID     |
| 氏名       | VARCHAR(100) | NOT NULL       | 利用者の氏名         |
| 連絡先     | VARCHAR(100) | NOT NULL       | 利用者の連絡先       |

#### 図書テーブル

| カラム名 | データ型      | 制約        | 説明                |
|----------|---------------|-------------|---------------------|
| 図書ID   | INT           | PRIMARY KEY | 図書の一意のID      |
| タイトル | VARCHAR(200)  | NOT NULL    | 図書のタイトル      |
| 著者     | VARCHAR(100)  | NOT NULL    | 著者名              |
| カテゴリ | VARCHAR(50)   |             | 図書のジャンル      |
| 在庫数   | INT           | NOT NULL    | 貸出可能な在庫数    |

#### 貸出履歴テーブル

| カラム名 | データ型 | 制約         | 説明                    |
|----------|----------|--------------|-------------------------|
| 貸出ID   | INT      | PRIMARY KEY  | 貸出履歴の一意のID      |
| 図書ID   | INT      | FOREIGN KEY  | 借りた図書のID          |
| ユーザーID | INT      | FOREIGN KEY  | 借りた利用者のID        |
| 貸出日   | DATE     | NOT NULL     | 貸出した日付            |
| 返却期限 | DATE     | NOT NULL     | 返却すべき期限          |
| 返却状態 | BOOL     | NOT NULL     | TRUE：返却済み、FALSE：貸出中|

## 4. UI設計

- [x] 各画面のワイヤーフレーム作成済（Figma参照）

### 4.1 利用者向け画面
- ログイン画面: IDとパスワードを入力して認証。
- 図書検索画面: キーワードで図書を検索し、在庫状況を確認。
- 貸出状況画面: 自身が借りている図書一覧と返却期限を表示。

### 4.2 管理者向け画面
- 利用者管理画面: 利用者情報の登録・編集・削除。
- 図書管理画面: 図書の登録・編集・削除。
- 貸出管理画面: 貸出履歴の一覧表示と延滞情報の確認。

